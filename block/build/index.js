(()=>{"use strict";const e=window.wp.blocks,r=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"jw/widgets","version":"1.0.0","title":"JustWatch Widget","category":"embed","icon":"video-alt3","description":"Embed a JustWatch widget using TMDB or IMDB id.","textdomain":"justwatch-widgets","attributes":{"objectType":{"type":"string","default":"movie"},"idType":{"type":"string","default":"imdb"},"externalId":{"type":"string","default":""},"overridesEnabled":{"type":"boolean","default":false},"overridesInitialized":{"type":"boolean","default":false},"overrideOfferLabel":{"type":"string"},"overrideScale":{"type":"string"},"overrideMaxOffersEnabled":{"type":"boolean"},"overrideMaxOffers":{"type":"string"},"overrideLanguageEnabled":{"type":"boolean"},"overrideLanguage":{"type":"string"},"overrideShowHeading":{"type":"boolean"},"overrideHeadingText":{"type":"string"},"overrideHeadingLevel":{"type":"string"},"overrideHeadingPosition":{"type":"string"},"overrideBorderEnabled":{"type":"boolean"},"overrideBorderColour":{"type":"string"},"overrideWrapperMarginEnabled":{"type":"boolean"},"overrideWrapperMarginTop":{"type":"string"},"overrideWrapperMarginRight":{"type":"string"},"overrideWrapperMarginBottom":{"type":"string"},"overrideWrapperMarginLeft":{"type":"string"},"overrideWrapperMargin":{"type":"string"},"overrideTextColourOverrideEnabled":{"type":"boolean"},"overrideTextColour":{"type":"string"},"overrideNoOffersMessage":{"type":"string"},"overrideTitleNotFoundMessage":{"type":"string"}},"editorScript":"file:./build/index.js"}'),a=window.wp.blockEditor,o=window.wp.components,l=window.wp.element,i=window.ReactJSXRuntime;(0,e.registerBlockType)(r.name,{...r,edit:({attributes:e,setAttributes:r})=>{const{objectType:n,idType:d,externalId:t,overridesEnabled:s,overridesInitialized:g}=e,v={offerLabel:"",scale:"1.0",maxOffersEnabled:!1,maxOffers:"10",languageEnabled:!1,language:"en",showHeading:!0,headingText:"Now streaming on:",headingLevel:"h3",headingPosition:"inside",borderEnabled:!0,borderColour:"#dcdcdc",wrapperMarginTop:"0",wrapperMarginRight:"0",wrapperMarginBottom:"1rem",wrapperMarginLeft:"0",textColourOverrideEnabled:!1,textColour:"",noOffersMessage:"There are no links for {{title}} right now, but check back soon!",titleNotFoundMessage:"There are no links for this title right now, but check back soon!",...window.jwWidgetsGlobalDefaults||{}},b=(0,a.useBlockProps)(),p=(0,l.useMemo)(()=>!!t&&!!["movie","show"].includes(n)&&!!["tmdb","imdb"].includes(d),[n,d,t]),u=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.SelectControl,{label:"Type",value:n,options:[{label:"Movie",value:"movie"},{label:"TV Series",value:"show"}],onChange:e=>r({objectType:e})}),(0,i.jsx)(o.SelectControl,{label:"ID Type",value:d,options:[{label:"IMDB",value:"imdb"},{label:"TMDB",value:"tmdb"}],onChange:e=>r({idType:e})}),(0,i.jsx)(o.TextControl,{label:"imdb"===d?"IMDB ID":"TMDB ID",value:t,onChange:e=>r({externalId:e.trim()}),placeholder:"imdb"===d?"tt1234567":"603",help:"imdb"===d?"Example: tt10548174":"Example: 603"})]}),h=["0.6","0.7","0.8","0.9","1.0","1.1","1.2","1.3","1.4","1.5","1.6","1.7","1.8","1.9","2.0"].map(e=>({label:`${Math.round(100*parseFloat(e))}%`,value:e})),c=Array.from({length:20},(e,r)=>{const a=String(r+1);return{label:a,value:a}}),x=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.ToggleControl,{label:"Enable per-block overrides",checked:!!s,onChange:e=>{r(e?g?{overridesEnabled:!0}:{overridesEnabled:!0,overridesInitialized:!0,overrideOfferLabel:v.offerLabel,overrideScale:v.scale,overrideMaxOffersEnabled:!!v.maxOffersEnabled,overrideMaxOffers:v.maxOffers,overrideLanguageEnabled:!!v.languageEnabled,overrideLanguage:v.language,overrideShowHeading:!!v.showHeading,overrideHeadingText:v.headingText,overrideHeadingLevel:v.headingLevel,overrideHeadingPosition:v.headingPosition,overrideBorderEnabled:!!v.borderEnabled,overrideBorderColour:v.borderColour,overrideWrapperMarginEnabled:!1,overrideWrapperMarginTop:v.wrapperMarginTop,overrideWrapperMarginRight:v.wrapperMarginRight,overrideWrapperMarginBottom:v.wrapperMarginBottom,overrideWrapperMarginLeft:v.wrapperMarginLeft,overrideTextColourOverrideEnabled:!!v.textColourOverrideEnabled,overrideTextColour:v.textColour,overrideNoOffersMessage:v.noOffersMessage,overrideTitleNotFoundMessage:v.titleNotFoundMessage}:{overridesEnabled:!1})}}),s&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.SelectControl,{label:"Offer Type",value:e.overrideOfferLabel||"",options:[{label:"Use global default",value:""},{label:"Monetization Type",value:"monetization_type"},{label:"Price",value:"price"},{label:"None",value:"none"}],onChange:e=>r({overrideOfferLabel:e})}),(0,i.jsx)(o.SelectControl,{label:"Icon Size",value:e.overrideScale||"",options:[{label:"Use global default",value:""},...h],onChange:e=>r({overrideScale:e})}),(0,i.jsx)(o.ToggleControl,{label:"Override max streaming services",checked:!!e.overrideMaxOffersEnabled,onChange:e=>r({overrideMaxOffersEnabled:e})}),e.overrideMaxOffersEnabled&&(0,i.jsx)(o.SelectControl,{label:"Max Streaming Services",value:e.overrideMaxOffers||"10",options:c,onChange:e=>r({overrideMaxOffers:e})}),(0,i.jsx)(o.ToggleControl,{label:"Override language",checked:!!e.overrideLanguageEnabled,onChange:e=>r({overrideLanguageEnabled:e})}),e.overrideLanguageEnabled&&(0,i.jsx)(o.SelectControl,{label:"Language",value:e.overrideLanguage||"en",options:[{label:"Arabic",value:"ar"},{label:"Chinese",value:"zh"},{label:"Czech",value:"cs"},{label:"French",value:"fr"},{label:"German",value:"de"},{label:"Italian",value:"it"},{label:"Polish",value:"pl"},{label:"Portugese",value:"pt"},{label:"Romanian",value:"ro"},{label:"Russian",value:"ru"},{label:"Spanish",value:"es"}],onChange:e=>r({overrideLanguage:e})}),(0,i.jsx)(o.ToggleControl,{label:"Show Heading",checked:void 0===e.overrideShowHeading||!!e.overrideShowHeading,onChange:e=>r({overrideShowHeading:e})}),(void 0===e.overrideShowHeading||e.overrideShowHeading)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.TextControl,{label:"Widget Heading Text",value:e.overrideHeadingText||"",help:"Leave blank to use global default.",onChange:e=>r({overrideHeadingText:e})}),(0,i.jsx)(o.SelectControl,{label:"Widget Heading Tag",value:e.overrideHeadingLevel||"",options:[{label:"Use global default",value:""},{label:"H2",value:"h2"},{label:"H3",value:"h3"},{label:"H4",value:"h4"},{label:"H5",value:"h5"},{label:"H6",value:"h6"},{label:"P",value:"p"}],onChange:e=>r({overrideHeadingLevel:e})}),(0,i.jsx)(o.SelectControl,{label:"Heading Position",value:e.overrideHeadingPosition||"",options:[{label:"Use global default",value:""},{label:"Inside Border",value:"inside"},{label:"Outside Border",value:"outside"}],onChange:e=>r({overrideHeadingPosition:e})})]}),(0,i.jsx)(o.ToggleControl,{label:"Show Border",checked:!!e.overrideBorderEnabled,onChange:e=>r({overrideBorderEnabled:e})}),e.overrideBorderEnabled&&(0,i.jsx)(o.TextControl,{label:"Border Colour",value:e.overrideBorderColour||"",placeholder:"#dcdcdc",onChange:e=>r({overrideBorderColour:e})}),(0,i.jsx)(o.ToggleControl,{label:"Override margins",checked:!!e.overrideWrapperMarginEnabled,onChange:e=>r({overrideWrapperMarginEnabled:e})}),e.overrideWrapperMarginEnabled&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.TextControl,{label:"Margin Top",value:e.overrideWrapperMarginTop||"",help:"Leave blank to use global default.",onChange:e=>r({overrideWrapperMarginTop:e})}),(0,i.jsx)(o.TextControl,{label:"Margin Right",value:e.overrideWrapperMarginRight||"",help:"Leave blank to use global default.",onChange:e=>r({overrideWrapperMarginRight:e})}),(0,i.jsx)(o.TextControl,{label:"Margin Bottom",value:e.overrideWrapperMarginBottom||"",help:"Leave blank to use global default.",onChange:e=>r({overrideWrapperMarginBottom:e})}),(0,i.jsx)(o.TextControl,{label:"Margin Left",value:e.overrideWrapperMarginLeft||"",help:"Leave blank to use global default.",onChange:e=>r({overrideWrapperMarginLeft:e})})]}),(0,i.jsx)(o.ToggleControl,{label:"Override Label Colour",checked:!!e.overrideTextColourOverrideEnabled,onChange:e=>r({overrideTextColourOverrideEnabled:e})}),e.overrideTextColourOverrideEnabled&&(0,i.jsx)(o.TextControl,{label:"Label Colour",value:e.overrideTextColour||"",placeholder:"#000000",onChange:e=>r({overrideTextColour:e})}),(0,i.jsx)(o.TextareaControl,{label:"No Offers Message",value:e.overrideNoOffersMessage||"",help:"Leave blank to use global default. Supports {{title}}.",onChange:e=>r({overrideNoOffersMessage:e})}),(0,i.jsx)(o.TextareaControl,{label:"Title Not Found Message",value:e.overrideTitleNotFoundMessage||"",help:"Leave blank to use global default.",onChange:e=>r({overrideTitleNotFoundMessage:e})})]})]});return(0,i.jsxs)(l.Fragment,{children:[(0,i.jsxs)(a.InspectorControls,{children:[(0,i.jsx)(o.PanelBody,{title:"JustWatch Widget",initialOpen:!0,children:u}),(0,i.jsx)(o.PanelBody,{title:"Overrides",initialOpen:!1,children:x})]}),(0,i.jsx)("div",{...b,children:(0,i.jsxs)("div",{style:{border:"1px solid #ddd",padding:"12px",borderRadius:"4px"},children:[(0,i.jsx)("strong",{children:"JustWatch Widget"}),(0,i.jsx)("div",{style:{marginTop:12},children:u}),!p&&(0,i.jsx)(o.Notice,{status:"warning",isDismissible:!1,children:"Enter a valid type and ID."}),p&&(0,i.jsx)(o.Notice,{status:"success",isDismissible:!1,children:"âœ… ðŸŽ¥"})]})})]})}})})();