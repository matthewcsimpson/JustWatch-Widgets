(()=>{"use strict";const e=window.wp.blocks,l=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"jw/widgets","version":"0.6.0","title":"JustWatch Widget","category":"embed","icon":"video-alt3","description":"Embed a JustWatch widget using TMDB or IMDB id.","textdomain":"jw-widgets","attributes":{"objectType":{"type":"string","default":"movie"},"idType":{"type":"string","default":"imdb"},"externalId":{"type":"string","default":""},"overridesEnabled":{"type":"boolean","default":false},"overridesInitialized":{"type":"boolean","default":false},"overrideOfferLabel":{"type":"string"},"overrideScale":{"type":"string"},"overrideMaxOffersEnabled":{"type":"boolean"},"overrideMaxOffers":{"type":"string"},"overrideLanguageEnabled":{"type":"boolean"},"overrideLanguage":{"type":"string"},"overrideShowHeading":{"type":"boolean"},"overrideHeadingText":{"type":"string"},"overrideHeadingLevel":{"type":"string"},"overrideHeadingPosition":{"type":"string"},"overrideBorderEnabled":{"type":"boolean"},"overrideBorderColour":{"type":"string"},"overrideTextColourOverrideEnabled":{"type":"boolean"},"overrideTextColour":{"type":"string"},"overrideNoOffersMessage":{"type":"string"},"overrideTitleNotFoundMessage":{"type":"string"}},"editorScript":"file:./build/index.js"}'),a=window.wp.blockEditor,r=window.wp.components,o=window.wp.element,i=window.ReactJSXRuntime;(0,e.registerBlockType)(l.name,{...l,edit:({attributes:e,setAttributes:l})=>{const{objectType:n,idType:d,externalId:t,overridesEnabled:s,overridesInitialized:v}=e,g={offerLabel:"",scale:"1.0",maxOffersEnabled:!1,maxOffers:"10",languageEnabled:!1,language:"en",showHeading:!0,headingText:"Now streaming on:",headingLevel:"h3",headingPosition:"inside",borderEnabled:!0,borderColour:"#dcdcdc",textColourOverrideEnabled:!1,textColour:"",noOffersMessage:"There are no links for {{title}} right now, but check back soon!",titleNotFoundMessage:"There are no links for this title right now, but check back soon!",...window.jwWidgetsGlobalDefaults||{}},b=(0,a.useBlockProps)(),u=(0,o.useMemo)(()=>!!t&&!!["movie","show"].includes(n)&&!!["tmdb","imdb"].includes(d),[n,d,t]),h=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.SelectControl,{label:"Type",value:n,options:[{label:"Movie",value:"movie"},{label:"TV Series",value:"show"}],onChange:e=>l({objectType:e})}),(0,i.jsx)(r.SelectControl,{label:"ID Type",value:d,options:[{label:"IMDB",value:"imdb"},{label:"TMDB",value:"tmdb"}],onChange:e=>l({idType:e})}),(0,i.jsx)(r.TextControl,{label:"imdb"===d?"IMDB ID":"TMDB ID",value:t,onChange:e=>l({externalId:e.trim()}),placeholder:"imdb"===d?"tt1234567":"603",help:"imdb"===d?"Example: tt10548174":"Example: 603"})]}),c=["0.6","0.7","0.8","0.9","1.0","1.1","1.2","1.3","1.4","1.5","1.6","1.7","1.8","1.9","2.0"].map(e=>({label:e,value:e})),x=Array.from({length:20},(e,l)=>{const a=String(l+1);return{label:a,value:a}}),p=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.ToggleControl,{label:"Enable per-block overrides",checked:!!s,onChange:e=>{l(e?v?{overridesEnabled:!0}:{overridesEnabled:!0,overridesInitialized:!0,overrideOfferLabel:g.offerLabel,overrideScale:g.scale,overrideMaxOffersEnabled:!!g.maxOffersEnabled,overrideMaxOffers:g.maxOffers,overrideLanguageEnabled:!!g.languageEnabled,overrideLanguage:g.language,overrideShowHeading:!!g.showHeading,overrideHeadingText:g.headingText,overrideHeadingLevel:g.headingLevel,overrideHeadingPosition:g.headingPosition,overrideBorderEnabled:!!g.borderEnabled,overrideBorderColour:g.borderColour,overrideTextColourOverrideEnabled:!!g.textColourOverrideEnabled,overrideTextColour:g.textColour,overrideNoOffersMessage:g.noOffersMessage,overrideTitleNotFoundMessage:g.titleNotFoundMessage}:{overridesEnabled:!1})}}),s&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.SelectControl,{label:"Offer Label",value:e.overrideOfferLabel||"",options:[{label:"Use global default",value:""},{label:"Monetization Type",value:"monetization_type"},{label:"Price",value:"price"},{label:"None",value:"none"}],onChange:e=>l({overrideOfferLabel:e})}),(0,i.jsx)(r.SelectControl,{label:"Icon Size",value:e.overrideScale||"",options:[{label:"Use global default",value:""},...c],onChange:e=>l({overrideScale:e})}),(0,i.jsx)(r.ToggleControl,{label:"Override max streaming services",checked:!!e.overrideMaxOffersEnabled,onChange:e=>l({overrideMaxOffersEnabled:e})}),e.overrideMaxOffersEnabled&&(0,i.jsx)(r.SelectControl,{label:"Max Streaming Services",value:e.overrideMaxOffers||"10",options:x,onChange:e=>l({overrideMaxOffers:e})}),(0,i.jsx)(r.ToggleControl,{label:"Override language",checked:!!e.overrideLanguageEnabled,onChange:e=>l({overrideLanguageEnabled:e})}),e.overrideLanguageEnabled&&(0,i.jsx)(r.SelectControl,{label:"Language",value:e.overrideLanguage||"en",options:[{label:"English",value:"en"},{label:"French",value:"fr"},{label:"Spanish",value:"es"},{label:"German",value:"de"},{label:"Italian",value:"it"},{label:"Portuguese",value:"pt"},{label:"Dutch",value:"nl"},{label:"Swedish",value:"sv"},{label:"Norwegian",value:"no"},{label:"Danish",value:"da"},{label:"Finnish",value:"fi"},{label:"Polish",value:"pl"},{label:"Czech",value:"cs"},{label:"Hungarian",value:"hu"},{label:"Romanian",value:"ro"},{label:"Greek",value:"el"},{label:"Turkish",value:"tr"},{label:"Russian",value:"ru"},{label:"Ukrainian",value:"uk"},{label:"Japanese",value:"ja"},{label:"Korean",value:"ko"},{label:"Chinese",value:"zh"},{label:"Hindi",value:"hi"},{label:"Arabic",value:"ar"}],onChange:e=>l({overrideLanguage:e})}),(0,i.jsx)(r.ToggleControl,{label:"Show Heading",checked:void 0===e.overrideShowHeading||!!e.overrideShowHeading,onChange:e=>l({overrideShowHeading:e})}),(void 0===e.overrideShowHeading||e.overrideShowHeading)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.TextControl,{label:"Widget Heading Text",value:e.overrideHeadingText||"",help:"Leave blank to use global default.",onChange:e=>l({overrideHeadingText:e})}),(0,i.jsx)(r.SelectControl,{label:"Widget Heading Tag",value:e.overrideHeadingLevel||"",options:[{label:"Use global default",value:""},{label:"H2",value:"h2"},{label:"H3",value:"h3"},{label:"H4",value:"h4"},{label:"H5",value:"h5"},{label:"H6",value:"h6"},{label:"P",value:"p"}],onChange:e=>l({overrideHeadingLevel:e})}),(0,i.jsx)(r.SelectControl,{label:"Heading Position",value:e.overrideHeadingPosition||"",options:[{label:"Use global default",value:""},{label:"Inside Border",value:"inside"},{label:"Outside Border",value:"outside"}],onChange:e=>l({overrideHeadingPosition:e})})]}),(0,i.jsx)(r.ToggleControl,{label:"Show Border",checked:!!e.overrideBorderEnabled,onChange:e=>l({overrideBorderEnabled:e})}),e.overrideBorderEnabled&&(0,i.jsx)(r.TextControl,{label:"Border Colour",value:e.overrideBorderColour||"",placeholder:"#dcdcdc",onChange:e=>l({overrideBorderColour:e})}),(0,i.jsx)(r.ToggleControl,{label:"Override Label Colour",checked:!!e.overrideTextColourOverrideEnabled,onChange:e=>l({overrideTextColourOverrideEnabled:e})}),e.overrideTextColourOverrideEnabled&&(0,i.jsx)(r.TextControl,{label:"Label Colour",value:e.overrideTextColour||"",placeholder:"#000000",onChange:e=>l({overrideTextColour:e})}),(0,i.jsx)(r.TextareaControl,{label:"No Offers Message",value:e.overrideNoOffersMessage||"",help:"Leave blank to use global default. Supports {{title}}.",onChange:e=>l({overrideNoOffersMessage:e})}),(0,i.jsx)(r.TextareaControl,{label:"Title Not Found Message",value:e.overrideTitleNotFoundMessage||"",help:"Leave blank to use global default.",onChange:e=>l({overrideTitleNotFoundMessage:e})})]})]});return(0,i.jsxs)(o.Fragment,{children:[(0,i.jsxs)(a.InspectorControls,{children:[(0,i.jsx)(r.PanelBody,{title:"JustWatch Widget",initialOpen:!0,children:h}),(0,i.jsx)(r.PanelBody,{title:"Overrides",initialOpen:!1,children:p})]}),(0,i.jsx)("div",{...b,children:(0,i.jsxs)("div",{style:{border:"1px solid #ddd",padding:"12px",borderRadius:"4px"},children:[(0,i.jsx)("strong",{children:"JustWatch Widget"}),(0,i.jsx)("div",{style:{marginTop:12},children:h}),!u&&(0,i.jsx)(r.Notice,{status:"warning",isDismissible:!1,children:"Enter a valid type and ID."}),u&&(0,i.jsx)(r.Notice,{status:"success",isDismissible:!1,children:"âœ… ðŸŽ¥"})]})})]})}})})();